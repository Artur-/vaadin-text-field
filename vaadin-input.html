<!--
@license
Copyright (c) 2017 Vaadin Ltd.
This program is available under Apache License Version 2.0, available at https://vaadin.com/license/
-->

<!--
`<vaadin-input>` is a Polymer element for <element-functionality>.

```html
<vaadin-input>
</vaadin-input>
```

@element vaadin-input
@demo demo/index.html
-->

<link rel="import" href="../polymer/polymer.html">

<dom-module id="vaadin-input">
  <template>
    <style>
      :host {
        display: inline-block;
      }
    </style>
    <input id="input"
      autocapitalize$="{{autocapitalize}}"
      autocomplete$="{{autocomplete}}"
      autocorrect$="{{autocorrect}}"
      autofocus$="{{autofocus}}"
      disabled$="{{disabled}}"
      list="{{list}}"
      maxlength="{{maxlength}}"
      minlength="{{minlength}}"
      name="{{name}}"
      pattern="{{pattern}}"
      placeholder="{{placeholder}}"
      readonly$="{{readonly}}"
      required$="{{required}}"
      tabindex="{{tabindex}}"
      value="{{value::input}}"
    />
  </template>

  <script>
  class VaadinInput extends Polymer.Element {
    static get is() {
      return 'vaadin-input';
    }

    static get config() {
      return {
        properties: {
          autocapitalize: {
            type: String,
            notify: true
          },
          autocomplete: {
            type: Boolean,
            notify: true
          },
          autocorrect: {
            type: Boolean,
            notify: true
          },
          autofocus: {
            type: Boolean,
            notify: true
          },
          disabled: {
            type: Boolean,
            notify: true
          },
          list: {
            type: String,
            notify: true
          },
          maxlength: {
            type: Number,
            notify: true
          },
          minlength: {
            type: Number,
            notify: true
          },
          name: {
            type: String,
            notify: true
          },
          pattern: {
            type: String,
            notify: true
          },
          placeholder: {
            type: String,
            notify: true
          },
          readonly: {
            type: Boolean,
            notify: true
          },
          required: {
            type: Boolean,
            notify: true
          },
          tabindex: {
            type: Number,
            notify: true
          },
          value: {
            type: String,
            observer: '_valueChanged',
            notify: true
          },
          bindValue: {
            type: String,
            observer: '_bindValueChanged'
          }
        },

        observers: [
          '_bindValueChanged(bindValue)'
        ],

        listeners: {
          'input': '_onInput',
          'keypress': '_onKeypress'
        },
      };
    }

    ready() {
      super.ready();
      this.bindValue = this.value;
    }

    _valueChanged(value) {
      this.bindValue = value;
    }

    _bindValueChanged(bindValue) {
      this.value = bindValue;
      this.dispatchEvent(new CustomEvent('bind-value-changed'), {bubbles: true});
    }
  }

  customElements.define(VaadinInput.is, VaadinInput);
  </script>
</dom-module>
